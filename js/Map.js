(function(){
	window.Map = function(){
		// 地图矩阵，表格一一对应着数据
		this.mapCode = [
		[0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,5,0,0,0,0,0,0,0],
		[0,0,0,0,5,0,0,0,0,0,0,0],
		[0,0,0,0,5,0,0,0,0,0,0,0],
		[0,0,0,0,5,0,0,0,0,0,0,0],
		[0,0,0,0,5,0,0,0,0,0,0,0],
		[0,0,0,0,4,0,0,0,0,0,0,0],
		[0,0,0,0,4,0,0,0,0,0,0,0],
		[0,0,0,0,4,0,0,0,0,0,0,0],
		[1,2,3,4,5,0,0,2,3,4,3,1],
		[9,9,9,9,9,9,9,9,9,9,9,9]
		]
	}
	Map.prototype.renderMap = function(){
		// 渲染地图
		for(var i = 0; i < 20; i++){
			for(var j = 0; j < 12; j++){
				if(this.mapCode[i][j] != 0){
					game.setColor(i,j,this.mapCode[i][j])
				}
			}
		}
	}
	Map.prototype.remove = function(){
		for(var i = 0; i < 20; i++){
			// 如果地图矩阵中有一行都不是0，就需要消行了
			if(this.mapCode[i].indexOf(0) == -1){
				// 删除这一行
				this.mapCode.splice(i,1)
				// 删一行补一行，补一行空的
				this.mapCode.unshift([0,0,0,0,0,0,0,0,0,0,0,0])
				// 加分
				game.score += 10;
				$("h1").html("分数："+game.score)
			}
		}
	}
})()